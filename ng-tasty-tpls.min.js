angular.module("ngTasty",["ngTasty.tpls","ngTasty.filter","ngTasty.service","ngTasty.table"]),angular.module("ngTasty.tpls",["template/table/head.html","template/table/pagination.html"]),angular.module("ngTasty.filter",["ngTasty.filter.cleanFieldName","ngTasty.filter.range"]),angular.module("ngTasty.filter.cleanFieldName",[]).filter("cleanFieldName",function(){return function(e){return e.replace(/[^a-zA-Z0-9-]+/g,"-").toLowerCase()}}),angular.module("ngTasty.filter.range",[]).filter("range",function(){return function(e,n,a){var t;if(t=[],"undefined"==typeof n&&(n=e,e=0),"undefined"==typeof a&&(a=1),a>0&&e>=n||0>a&&n>=e)return[];for(var i=e;a>0?n>i:i>n;i+=a)t.push(i);return t}}),angular.module("ngTasty.service",["ngTasty.service.debounce","ngTasty.service.setProperty","ngTasty.service.joinObjects"]),angular.module("ngTasty.service.debounce",[]).factory("debounce",["$timeout",function(e){return function(n,a){var t;return function(){var i=this,r=arguments;e.cancel(t),t=e(function(){t=null,n.apply(i,r)},a)}}}]),angular.module("ngTasty.service.setProperty",[]).factory("setProperty",function(){return function(e,n,a){return angular.isDefined(n[a])&&(e[a]=n[a]),e}}),angular.module("ngTasty.service.joinObjects",[]).factory("joinObjects",["setProperty",function(e){return function(n,a){for(var t in a)e(n,a,t);return n}}]),angular.module("ngTasty.table",["ngTasty.filter.cleanFieldName","ngTasty.filter.range","ngTasty.service.debounce","ngTasty.service.setProperty","ngTasty.service.joinObjects"]).constant("tableConfig",{query:{page:"page",count:"count",sortBy:"sort-by",sortOrder:"sort-order"},resource:void 0}).controller("TableController",["$scope","$attrs","tableConfig","debounce","setProperty","joinObjects",function(e,n,a,t,i,r){"use strict";if(this.$scope=e,e.query=a.query,e.resource=a.resource,angular.isDefined(n.query)&&(e.query=e.$parent.$eval(n.query)),!angular.isDefined(n.resource))throw"AngularJS tastyTable directive: miss the resource attribute";if(e.resource=e.$parent.$eval(n.resource),!e.resource)throw"AngularJS tastyTable directive: the resource ("+n.resource+") callback it's undefined";e.url="",e.header={columns:[]},e.rows=[],e.params={},e.pagination={},e.theadDirective=!1,e.paginationDirective=!1,this.activate=function(n){e[n+"Directive"]=!0,e.params[n]=!0},this.setParams=function(n,a){e.params[n]=a},e.setDirectivesValues=function(n){return n?(e.rows=n.rows,e.header={columns:n.header,sortBy:n.sortBy,sortOrder:n.sortOrder},void(e.pagination=n.pagination)):!1},e.buildUrl=function(a,t){var s,o;return s={},e.theadDirective&&(s=i(s,a,"sortBy"),s=i(s,a,"sortOrder")),e.paginationDirective&&(s=i(s,a,"page"),s=i(s,a,"count")),n.filters&&(s=r(s,t)),Object.keys(s).map(function(n){return o=s[n],e.query[n]&&(n=e.query[n]),encodeURIComponent(n)+"="+encodeURIComponent(o)}).join("&")},e.updateResource=t(function(){e.url=e.buildUrl(e.params,e[n.filters]),e[n.resource](e.url).then(function(n){e.setDirectivesValues(n)})},100),e.initDirective=function(){e.params.sortBy=void 0,e.params.sortOrder="asc",e.params.page=1,e.params.count=5,e.updateResource()},n.filters&&e.$watch(n.filters,function(n,a){n!==a&&e.updateResource()},!0),e.$watch("params",function(n,a){n!==a&&e.updateResource()},!0),e.initDirective()}]).directive("tastyTable",function(){return{restrict:"A",scope:!0,controller:"TableController"}}).directive("tastyThead",["$filter",function(e){return{restrict:"AE",require:"^tastyTable",scope:{notSortBy:"="},templateUrl:"template/table/head.html",link:function(n,a,t,i){"use strict";var r;i.activate("thead"),n.fields={},r=function(){var a,t;for(a=n.header.columns.length,t=0;a>t;t++)n.fields[n.header.columns[t].key]={width:parseFloat((100/a).toFixed(2)),sort:e("cleanFieldName")(n.header.columns[t].key)};"dsc"===n.header.sortOrder&&(n.header.sortBy="-"+n.header.sortBy)},n.sortBy=function(a){if(n.notSortBy&&n.notSortBy.indexOf(a.key)>=0)return!1;var t;t=e("cleanFieldName")(a.key),n.header.sortBy==t?(n.header.sortBy="-"+t,i.setParams("sortOrder","dsc")):(n.header.sortBy=t,i.setParams("sortOrder","asc")),i.setParams("sortBy",a.key)},n.isSortUp=function(e){return void 0===n.fields[e.key]?!1:n.header.sortBy=="-"+n.fields[e.key].sort},n.isSortDown=function(e){return void 0===n.fields[e.key]?!1:n.header.sortBy==n.fields[e.key].sort},i.$scope.$watch("header",function(e,a){e&&e!==a&&(n.header=e,r())})}}}]).directive("tastyPagination",["$filter",function(e){return{restrict:"AE",require:"^tastyTable",scope:{},templateUrl:"template/table/pagination.html",link:function(n,a,t,i){"use strict";var r,s,o,g,u,c;i.activate("pagination"),n.numPaginations=5,n.pagListCount=[5,25,50,100],n.pagination={},n.pagMinRange=1,n.pagMaxRange=1,r=function(e){i.setParams("page",e)},s=function(e){var a,t;a=e*n.pagination.page,a>n.pagination.size&&(t=Math.ceil(n.pagination.size/e),i.setParams("page",t)),i.setParams("count",e)},o=function(){var e;e=n.pagination.page,e>n.pagination.pages&&(e=n.pagination.pages),n.pagMinRange=e-2>0?e-2:1,n.pagMaxRange=e+2,n.pagination.page=e,c()},g=function(){return n.pagHideMinRange===!0||n.pagMinRange<1?!1:(n.pagMaxRange=n.pagMinRange,n.pagMinRange=n.pagMaxRange-n.numPaginations,void c())},u=function(){return n.pagHideMaxRange===!0||n.pagMaxRange>n.pagination.pages?!1:(n.pagMinRange=n.pagMaxRange,n.pagMaxRange=n.pagMinRange+n.numPaginations,n.pagMaxRange>n.pagination.pages&&(n.pagMaxRange=n.pagination.pages),n.pagMinRange=n.pagMaxRange-n.numPaginations,void c())},c=function(){n.pagMinRange=n.pagMinRange>0?n.pagMinRange:1,n.pagMaxRange=n.pagMinRange+n.numPaginations,n.pagMaxRange>n.pagination.pages&&(n.pagMaxRange=n.pagination.pages+1),n.pagHideMinRange=n.pagMinRange<=1,n.pagHideMaxRange=n.pagMaxRange>=n.pagination.pages,n.pagListCount=n.pagination.size<50?[5,25]:n.pagination.size<100?[5,25,50]:[5,25,50,100],n.rangePage=e("range")(n.pagMinRange,n.pagMaxRange)},n.page={get:r,setCount:s,previous:g,remaining:u},i.$scope.$watch("pagination",function(e,a){e&&e!==a&&(n.pagination=e,o())})}}}]),angular.module("template/table/head.html",[]).run(["$templateCache",function(e){e.put("template/table/head.html",'<tr>\n  <th ng-repeat="column in header.columns" \n  ng-class="{active: column.key == header.sortBy}"\n  ng-click="sortBy(column)">\n    <span ng-bind="column.name"></span>\n    <span ng-if="isSortUp(column)" class="fa fa-sort-up"></span>\n    <span ng-if="isSortDown(column)" class="fa fa-sort-down"></span>\n  </th> \n</tr>')}]),angular.module("template/table/pagination.html",[]).run(["$templateCache",function(e){e.put("template/table/pagination.html",'<div class="row">\n  <div class="col-md-3 text-left">\n    <div class="btn-group">\n      <button type="button" class="btn btn-default" \n      ng-repeat="count in pagListCount" \n      ng-class="{active: count == pagination.count}" \n      ng-click="page.setCount(count)" ng-bind="count"></button>\n    </div>\n  </div>\n  <div class="col-md-6 text-center">\n    <ul class="pagination">\n      <li ng-class="{disabled: pagHideMinRange }">\n        <span ng-click="page.previous()">&laquo;</span>\n      </li>\n      <li ng-repeat="numPage in rangePage" ng-class="{active: numPage == pagination.page}">\n        <span ng-click="page.get(numPage)">\n          <span ng-bind="numPage"></span>\n          <span class="sr-only" ng-if="numPage == pagination.page">(current)</span>\n        </span>\n      </li>\n      <li ng-class="{disabled: pagHideMaxRange }">\n        <span ng-click="page.remaining()">&raquo;</span>\n      </li>\n    </ul>\n  </div>\n  <div class="col-md-3 text-right">\n    <p>Page <span ng-bind="pagination.page"></span> \n    of <span ng-bind="pagination.pages"></span>,\n    of <span ng-bind="pagination.size"></span> entries</p>\n  </div>\n</div>')}]);